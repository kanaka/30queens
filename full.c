#include <stdio.h>
#include <stdlib.h>

#define PBOARD
//#define SEEDSEARCH

//int list[30];
int list[30] ={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30};
char *image[30] ={
"|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|-|",
"|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|Q|"};

int fitness()
{
    int i,j,sum=0;

    for (i=0; i<29; i++) {
	for (j=i+1; j<30; j++) {
	    //printf ("list[i]: %d, list[j]: %d, i: %d, j: %d\n", list[i], list[j],i,j);
	    if ((list[i] == (list[j] + i-j)) ||
		(list[i] == (list[j] - i+j))) {
		sum++;
	    }
	}
    }
    return sum;
}


main ()
{
    int i, j, k, rand1, rand2, temp, fitness1;
    int cnt;
    int keep_going;

//    printf("fitness starting: %d\n", fitness());


#ifdef SEEDSEARCH
    for (cnt=0; cnt<10000; cnt++) {
	for (k=0; k<30; k++) {
	    list[k]=k+1;
	}
	srand(cnt);
#else
	cnt=0;
	srand(80*80-89);
#endif
	i=0;
	keep_going=1;
	while (keep_going) {
	    fitness1 = fitness();
	    rand1 = rand()%30;
	    rand2 = rand()%30;
	    /* Swap */
	    temp = list[rand1];
	    list[rand1] = list[rand2];
	    list[rand2] = temp;
	    if (fitness1 < fitness()) {
		/* Swap back */
		temp = list[rand1];
		list[rand1] = list[rand2];
		list[rand2] = temp;
	    } else {
		if (fitness() == 0) {
#ifdef PBOARD
		    printf ("+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n");
		    for (j=0; j<30; j++) {
			printf ("%s\n", image[list[j]-1]);
		    }
		    printf ("+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n");
#endif
		    printf ("%d , %d\n", i, cnt);
		    keep_going=0;
		}
	    }
    //	if (i%100==0) {
    //	    printf("fitness: %d\n", fitness());
    //	}
	    i++;
	};
#ifdef SEEDSEARCH
    }
#endif
}
