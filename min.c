/* gcc -O3 -Wl,"-static" 30q.c -o 30q */
int sum,a,b=435,l[30]={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,
    16,17,18,19,20,21,22,23,24,25,26,27,28,29,30};
char m[1985],i,j,x,y,z;
c() {
  for (sum=0,i=0,j=1; (j>29)?j=++i+1:1,i<29; j++)
    (l[i]==(l[j]+i-j))||(l[i]==(l[j]-i+j))?sum++:1;
  return sum;
}
main () {
  while (b && (((x=rand()%30)+1) && ((y=rand()%30))+1))
    z=l[y],l[y]=l[x],l[x]=z,(b<(a=c()))?z=l[y],l[y]=l[x],l[x]=z:(b=a);
  for (i=j=0;(j>30)?i++,j=0:1,i<32;j++,j==30&&i%31?m[i*62+l[i-1]*2-1]='Q':0)
    m[i*62+j*2]=i%31?'|':'+',m[i*62+j*2+1]=j==30?'\n':'-',i*j==930?puts(m):1;
}
